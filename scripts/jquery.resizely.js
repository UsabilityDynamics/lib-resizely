(function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}var c=a.prototype;c.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},c.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},c.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},c.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},c.on=c.addListener,c.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},c.once=c.addOnceListener,c.defineEvent=function(a){return this.getListeners(a),this},c.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},c.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},c.off=c.removeListener,c.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},c.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},c.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},c.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},c.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],f=c.listener.apply(this,b||[]),(f===this._getOnceReturnValue()||c.once===!0)&&this.removeListener(a,g[e][d].listener);return this},c.trigger=c.emitEvent,c.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},c.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},"undefined"!=typeof module&&module.exports?module.exports=a:this.EventEmitter=a}).call(this),function(a){var b=document.documentElement,c=function(){};b.addEventListener?c=function(a,b,c){a.addEventListener(b,c,!1)}:b.attachEvent&&(c=function(b,c,d){b[c+d]=d.handleEvent?function(){var b=a.event;b.target=b.target||b.srcElement,d.handleEvent.call(d,b)}:function(){var c=a.event;c.target=c.target||c.srcElement,d.call(b,c)},b.attachEvent("on"+c,b[c+d])});var d=function(){};b.removeEventListener?d=function(a,b,c){a.removeEventListener(b,c,!1)}:b.detachEvent&&(d=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var e={bind:c,unbind:d};a.eventie=e}(this),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===i.call(a)}function d(a){var b=[];if(c(a))b=a;else if("number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,c){function e(a,c,g){if(!(this instanceof e))return new e(a,c);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=d(a),this.options=b({},this.options),"function"==typeof c?g=c:b(this.options,c),g&&this.on("always",g),this.getImages(),f&&(this.jqDeferred=new f.Deferred);var h=this;setTimeout(function(){h.check()})}function i(a){this.img=a}e.prototype=new a,e.prototype.options={},e.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var d=c.querySelectorAll("img"),e=0,f=d.length;f>e;e++){var g=d[e];this.addImage(g)}}},e.prototype.addImage=function(a){var b=new i(a);this.images.push(b)},e.prototype.check=function(){function a(a,e){return b.options.debug&&h&&g.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},e.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify(b,a)})},e.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},f&&(f.fn.imagesLoaded=function(a,b){var c=new e(this,a,b);return c.jqDeferred.promise(f(this))});var j={};return i.prototype=new a,i.prototype.check=function(){var a=j[this.img.src];if(a)return void this.useCached(a);if(j[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this.proxyImage=new Image;c.bind(b,"load",this),c.bind(b,"error",this),b.src=this.img.src},i.prototype.useCached=function(a){if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else{var b=this;a.on("confirm",function(a){return b.confirm(a.isLoaded,"cache emitted confirmed"),!0})}},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},i.prototype.unbindProxyEvents=function(){c.unbind(this.proxyImage,"load",this),c.unbind(this.proxyImage,"error",this)},e}var f=a.jQuery,g=a.console,h="undefined"!=typeof g,i=Object.prototype.toString;a.imagesLoaded=e(a.EventEmitter,a.eventie)}(window),"function"==typeof jQuery?!function(a){"use strict";var b={sw:screen.width,sh:screen.height,d:"resize.ly",dpr:"devicePixelRatio"in window?devicePixelRatio:"1",dbg:!1,bp:250,minbp:500,fp:null,fu:null,fw:null},c={base64_encode:function(a){var b,c,d,e,f,g,h,i,j="",k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*!~";for(i=0;i<a.length;)b=a.charCodeAt(i++),c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=b>>2,f=((3&b)<<4)+(c>>4),g=((15&c)<<2)+(d>>6),h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),j+=k.charAt(e)+k.charAt(f)+k.charAt(g)+k.charAt(h);return j},rc4:function(a,b){var c,d,e,f=[],g=0,h="";for(c=0;256>c;c++)f[c]=c;for(c=0;256>c;c++)g=(g+f[c]+a.charCodeAt(c%a.length))%256,e=f[c],f[c]=f[g],f[g]=e;for(c=0,g=0,d=0;d<b.length;d++)c=(c+1)%256,g=(g+f[c])%256,e=f[c],f[c]=f[g],f[g]=e,h+=String.fromCharCode(b.charCodeAt(d)^f[(f[c]+f[g])%256]);return h},changeSrc:function(d,e){var f,g=a(e),h=g.attr("data-src"),i=b.sw+"x"+b.sh+","+b.dpr,j=window.location.protocol+"//"+window.location.host,k=window.location.pathname,l=0,m=0,n=g.attr("data-width"),o=g.attr("data-height"),p=window.location.protocol+"//"+b.d+"/img/transparent_dot.png";return b.dbg&&(p=window.location.protocol+"//"+b.d+"/img/transparent_red_dot.png"),imagesLoaded(e,function(){if(g.attr("src")==p){if(l=g.width(),m=g.height(),b.dbg&&(console.log("==== Image: "+g.attr("data-src")),console.log("Calculated dimensions: "+l+" x "+m+" on "+i)),(1==l&&1==m||!l&&!m)&&(b.dbg&&console.log("Could not determine dimensions. Setting manual width."),g.attr("_style",g.attr("style")),g.attr("style",("undefined"!=typeof g.attr("_style")?g.attr("_style").toString():"")+"width: 100% !important;"),l=g.width(),g.attr("style","undefined"==typeof g.attr("_style")?"":g.attr("_style")),g.removeAttr("_style"),m=0),l==m){g.attr("_style",g.attr("style")),g.attr("style",("undefined"!=typeof g.attr("_style")?g.attr("_style").toString():"")+"width: "+Math.floor(91*Math.random()+10).toString()+"px !important;");var a=g.width(),d=g.height();g.attr("style","undefined"==typeof g.attr("_style")?"":g.attr("_style")),g.removeAttr("_style"),a==d&&(g.attr("height")||(m=0))}if(l>=b.minbp){var q=l;l=l-l%b.bp+b.bp,m&&(m=Math.round(m*(l/q)))}n&&(b.dbg&&console.log("Manual dimensions found for width."),l=n),o&&(b.dbg&&console.log("Manual dimensions found for height."),m=o),b.dbg&&console.log("New Dimensions: "+l+"x"+m),"http:"!=h.substring(0,5)&&"https:"!=h.substring(0,6)&&(h="/"==h.substring(0,1)?j+h:j+k.substring(0,k.lastIndexOf("/")+1)+h),g.attr("_style",g.attr("style")),g.attr("style",("undefined"!=typeof g.attr("_style")?g.attr("_style").toString():"")+"width: 1px !important; height: 1px !important;"),f=window.location.protocol+"//"+b.d+"/"+(l?l:"")+"x"+(m?m:"")+"/"+h+"?x="+c.base64_encode(c.rc4("rly",i)),"boolean"==typeof b.fp&&(f=f+"&force_premium="+(b.fp?"1":"0")),"boolean"==typeof b.fu&&(f=f+"&force_update="+(b.fu?"1":"0")),"boolean"==typeof b.fw&&(f=f+"&force_watermark="+(b.fw?"1":"0")),imagesLoaded(e,function(){g.attr("style","undefined"==typeof g.attr("_style")?"":g.attr("_style")),g.removeAttr("_style")}),g.attr("src",f)}}),g.attr("src",p),this},init:function(d){return b=a.extend(b,d),this.each(c.changeSrc)}};a.fn.resizely=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Function '"+b+"' does not exist on jQuery.resizely"):c.init.apply(this,arguments)},("boolean"!=typeof window.autoResizely||window.autoResizely===!0)&&a(document).ready(function(){a("img[data-src]").resizely()})}(jQuery):"function"==typeof console.error&&console.error("Oops, looks like jQuery was not included before bringing in the Resize.ly jQuery plugin.");